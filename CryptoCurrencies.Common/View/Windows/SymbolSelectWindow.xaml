<local:WindowBase 
        x:Class="CryptoCurrencies.Common.View.Windows.SymbolSelectWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CryptoCurrencies.Common.View.Windows"
        mc:Ignorable="d"
        Title="SymbolSelectWindow" Height="450" Width="800"
        xmlns:modeldata="clr-namespace:CryptoCurrencies.Common.Model"
        x:TypeArguments="modeldata:SymbolSelectWindowModel"
        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
        xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" 
        xmlns:xamlExt="clr-namespace:CryptoCurrencies.Common.Extensions.XAML" 
        xmlns:viewmodel="clr-namespace:CryptoCurrencies.Common.ViewModel"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:dataEnums="clr-namespace:DataModels.Enums;assembly=DataModels"
        x:Name="window"
    >

    <Window.Resources>
        <xamlExt:DISource Type="{x:Type viewmodel:SymbolSelectWindowViewModel}" x:Key="vm"/>
    </Window.Resources>
    <Window.DataContext>
        <Binding Source="{StaticResource vm}"/>
    </Window.DataContext>
    
    <Grid x:Name="root">

        <dx:DXTabControl>
            <dx:DXTabItem Header="Coin Cap">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBox Margin="10" Text="{Binding Model.TextFilter,UpdateSourceTrigger=PropertyChanged}"/>

                    <dxg:GridControl Grid.Row="1" x:Name="gridControlCoinCap" ItemsSource="{DXBinding '@r(vm).Model.ExchangeSymbols[$dataEnums:ExchangeType.CoinCap]',AllowUnsetValue=True}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDoubleClick">
                                <i:ChangePropertyAction TargetObject="{Binding ElementName=window}" PropertyName="Result" Value="{Binding SelectedItem,ElementName=gridControlCoinCap}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <dxg:GridControl.View>
                            <dxg:TableView/>
                        </dxg:GridControl.View>

                        <dxg:GridControl.Columns>
                            <dxg:GridColumn SortFieldName="Symbol" Width="*" Header="Symbol" FieldName="Symbol"/>
                            <dxg:GridColumn SortFieldName="Price" Width="*" Header="Price" Binding="{DXBinding 'RowData.Row.Price + ``'}"/>

                            <!--<dxg:GridColumn SortFieldName="HighPrice" Width="*" Header="High Price" Binding="{DXBinding 'RowData.Row.HighPrice + ``'}"/>
                            <dxg:GridColumn SortFieldName="LowPrice" Width="*" Header="Low Price" Binding="{DXBinding 'RowData.Row.LowPrice + ``'}"/>-->

                            <dxg:GridColumn SortFieldName="PriceChangePercent" Width="*" Header="%(24h)">
                                <dxg:GridColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock  Text="{DXBinding '$sys:Math.Round(RowData.Row.PriceChangePercent,2) + `%`'}"/>
                                    </DataTemplate>
                                </dxg:GridColumn.CellTemplate>
                            </dxg:GridColumn>
                        </dxg:GridControl.Columns>
                    </dxg:GridControl>
                </Grid>
            </dx:DXTabItem>
            <dx:DXTabItem Header="Binance Future">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>


                    <TextBox Margin="10" Text="{Binding Model.TextFilter,UpdateSourceTrigger=PropertyChanged}"/>
                    <dxg:GridControl x:Name="gridControlBinanceFutures" Grid.Row="1" ItemsSource="{DXBinding '@r(vm).Model.ExchangeSymbols[$dataEnums:ExchangeType.BinanceFutures]',AllowUnsetValue=True}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDoubleClick">
                                <i:ChangePropertyAction TargetObject="{Binding ElementName=window}" PropertyName="Result" Value="{Binding SelectedItem,ElementName=gridControlBinanceFutures}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <dxg:GridControl.View>
                            <dxg:TableView/>
                        </dxg:GridControl.View>

                        <dxg:GridControl.Columns>
                            <dxg:GridColumn SortFieldName="Symbol" Width="*" Header="Symbol" FieldName="Symbol"/>
                            <dxg:GridColumn SortFieldName="Price" Width="*" Header="Price" Binding="{DXBinding 'RowData.Row.Price + ``'}"/>

                            <!--<dxg:GridColumn SortFieldName="HighPrice" Width="*" Header="High Price" Binding="{DXBinding 'RowData.Row.HighPrice + ``'}"/>
                            <dxg:GridColumn SortFieldName="LowPrice" Width="*" Header="Low Price" Binding="{DXBinding 'RowData.Row.LowPrice + ``'}"/>-->

                            <dxg:GridColumn SortFieldName="PriceChangePercent" Width="*" Header="%(24h)">
                                <dxg:GridColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock  Text="{DXBinding '$sys:Math.Round(RowData.Row.PriceChangePercent,2) + `%`'}"/>
                                    </DataTemplate>
                                </dxg:GridColumn.CellTemplate>
                            </dxg:GridColumn>
                        </dxg:GridControl.Columns>
                    </dxg:GridControl>
                </Grid>
            </dx:DXTabItem>
        </dx:DXTabControl>
    </Grid>
</local:WindowBase>
